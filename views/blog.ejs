<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head') %>
        <title>Single Blog || Blogify</title>

</head>
<style>
    .body_content p {
        margin: 0;
    }

    pre {
        overflow: hidden;
    }
</style>

<body>
    <%- include('./partials/nav') %>

        <div class="container mt-5">
            <h2>
                <%= blog.title %>
            </h2>
            <img class="mt-5" src="<%= blog.coverImage %>" width="800px" />
            <pre class="mt-3"><p><%= blog.body %></p></pre>
        </div>
        <div class="container d-flex">
            <div>
                <img src="<%= blog.createdBy.profileImageURL %>" width="100px" alt="">
            </div>
            <div class="body_content mt-2">
                <p>
                    <%= blog.createdBy.fullname %>
                </p>
                <p>
                    <%= blog.createdBy.createdAt %>
                </p>
            </div>
        </div>

     
      
      
      <div class="container mt-4">
        <h2>Comments (<%= comments.length %>)</h2>
            <% if (locals.user) { %>
            <form method="post" action="/blog/comment/<%= blog._id %>">
                <div class="mb-3">
                    <label for="content" class="form-label">Comment</label>
                    <input type="text" class="form-control" id="content" name="content" aria-describedby="content">
                    <button class="btn btn-primary mt-3" type="submit">Add</button>
                </div>
            </form>
            <% } %>
        </div>
        <div class="container mt-4">
            <% comments.forEach(comment => { %>
             <div class="d-flex mt-4">
                <div>
                    <img src="<%= comment.createdBy.profileImageURL %>" width="100px" alt="">
                </div>
                <div class="body_content mt-2">
                    <p>
                        <%= comment.createdBy.fullname %>
                    </p>
                    <p>
                        <%= comment.content %>
                    </p>
                </div>
             </div>
          <% }) %>
        </div>
        <%- include('./partials/script') %>
</body>

</html>